import{r as i,A as de,i as ce,E as me,q as u,G as ue,k as _,H as xe,m as be,o as ge,I as pe,J as he,K as fe,M as je,N as ye,O as Ne,j as e,C as A,d as M,P as T,Q as ve,U as ke,R as we,V as Se,W as Ce}from"./index-BJ8C48to.js";const Y=i.memo(({gameMode:o})=>{const l=we(o);return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-zinc-700 rounded-md",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Game Mode"}),e.jsxs("p",{className:"font-medium",children:[l?.label||o,!l?.isValid&&e.jsx("span",{className:"ml-2 text-xs text-red-500",children:"(Legacy)"})]}),l?.description&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-zinc-500 mt-1",children:l.description})]})}),q=i.memo(({points:o})=>{const l=Se(o);return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-zinc-700 rounded-md",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Points to Win"}),e.jsxs("p",{className:"font-medium",children:[l?.label||`${o} points`,!l?.isValid&&e.jsx("span",{className:"ml-2 text-xs text-red-500",children:"(Custom)"})]}),l?.description&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-zinc-500 mt-1",children:l.description})]})}),H=i.memo(({useBoricuaRules:o})=>{const y=Ce(o?"boricua":"standard");return e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-zinc-700 rounded-md",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Game Rules"}),e.jsxs("p",{className:"font-medium",children:[y?.label||(o?"Boricua":"Standard"),!y?.isValid&&e.jsx("span",{className:"ml-2 text-xs text-red-500",children:"(Legacy)"})]}),y?.description&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-zinc-500 mt-1",children:y.description})]})});Y.displayName="GameModeDisplay";q.displayName="PointsDisplay";H.displayName="RulesetDisplay";const Pe=({refreshNotifications:o})=>{const{id:l}=de(),y=ce(),[J,n]=i.useState({game:null,creator:null,opponent:null,leagueInfo:null,loading:!0,error:null}),[K,x]=i.useState({creatorScore:0,opponentScore:0,isSubmitting:!1}),[Q,X]=i.useState({rejectionReason:""}),{isOpen:Z,selectedUser:h,openModal:$,closeModal:ee}=me(),{game:s,creator:c,opponent:m,leagueInfo:N,loading:se,error:R}=J,{creatorScore:f,opponentScore:j,isSubmitting:d}=K,{rejectionReason:D}=Q,C=i.useCallback(()=>!s||!u.currentUser?!1:s.createdBy===u.currentUser.uid||s.opponent===u.currentUser.uid,[s]),P=i.useCallback(()=>!s||!u.currentUser?!1:s.createdBy===u.currentUser.uid,[s]),W=i.useCallback(()=>!s||!u.currentUser?!1:s.opponent===u.currentUser.uid,[s]),U=i.useCallback(()=>!s||!u.currentUser?!1:s.status==="in_progress"&&s.activePlayer?s.activePlayer===u.currentUser.uid:P(),[s,P]),v=i.useCallback(()=>!s||!u.currentUser?!1:s.status==="invited"&&s.opponent===u.currentUser.uid,[s]),B=i.useCallback(()=>!s||!u.currentUser?!1:s.status==="invited"&&s.createdBy===u.currentUser.uid,[s]),I=i.useCallback(()=>s?s.status==="accepted":!1,[s]),L=i.useCallback(()=>!s||!u.currentUser||!s.activePlayer?!1:s.activePlayer===u.currentUser.uid,[s]),z=i.useCallback(()=>!s||!u.currentUser?!1:s.status==="waiting_confirmation"&&s.confirmedBy===u.currentUser.uid,[s]),E=i.useCallback(async r=>{try{n(S=>({...S,loading:!0,error:null}));const t=await ue(r);if(!t){n(S=>({...S,loading:!1,error:"Game not found"}));return}const[a,b,p]=await Promise.allSettled([_(t.createdBy),_(t.opponent),t.leagueId?xe(t.leagueId):Promise.resolve(null)]),k=a.status==="fulfilled"?a.value:null,w=b.status==="fulfilled"?b.value:null,G=p.status==="fulfilled"?p.value:null,oe=G?{id:G.id,name:G.name,photoURL:G.photoURL}:null;n({game:t,creator:k,opponent:w,leagueInfo:oe,loading:!1,error:null}),t.scores&&x(S=>({...S,creatorScore:t.scores.creator,opponentScore:t.scores.opponent}))}catch(t){console.error("Error loading game:",t),n(a=>({...a,loading:!1,error:"Failed to load game details"}))}},[]);i.useEffect(()=>{if(!l){n(p=>({...p,loading:!1,error:"Game ID is missing"}));return}E(l);const r=be(),t=ge(r,"games",l);let a;const b=pe(t,p=>{if(p.exists()){const k={id:p.id,...p.data()};clearTimeout(a),a=setTimeout(()=>{n(w=>({...w,game:k})),k.scores&&x(w=>({...w,creatorScore:k.scores.creator,opponentScore:k.scores.opponent}))},100)}},p=>{console.error("Error listening to game updates:",p)});return()=>{b(),clearTimeout(a)}},[l,E]);const te=i.useCallback(async()=>{if(!l||!v()){n(r=>({...r,error:"You cannot accept this invitation"}));return}try{x(t=>({...t,isSubmitting:!0})),n(t=>({...t,error:null}));const r=await he(l);r?(n(t=>({...t,game:r})),o&&o()):n(t=>({...t,error:"Failed to accept invitation"}))}catch(r){console.error("Error accepting invitation:",r),n(t=>({...t,error:r.message||"An error occurred while accepting the invitation"}))}finally{x(r=>({...r,isSubmitting:!1}))}},[l,v,o]),re=i.useCallback(async()=>{if(!l||!v()){n(r=>({...r,error:"You cannot reject this invitation"}));return}try{x(t=>({...t,isSubmitting:!0})),n(t=>({...t,error:null}));const r=await fe(l,D);r?(n(t=>({...t,game:r})),o&&o(),y("/games")):n(t=>({...t,error:"Failed to reject invitation"}))}catch(r){console.error("Error rejecting invitation:",r),n(t=>({...t,error:r.message||"An error occurred while rejecting the invitation"}))}finally{x(r=>({...r,isSubmitting:!1}))}},[l,v,D,o,y]),ae=i.useCallback(async()=>{if(!l||!I()){n(r=>({...r,error:"This game is not ready to start"}));return}try{x(t=>({...t,isSubmitting:!0})),n(t=>({...t,error:null}));const r=await je(l);r?(n(t=>({...t,game:r})),o&&o()):n(t=>({...t,error:"Failed to start the game"}))}catch(r){console.error("Error starting game:",r),n(t=>({...t,error:r.message||"An error occurred while starting the game"}))}finally{x(r=>({...r,isSubmitting:!1}))}},[l,I,o]),ne=i.useCallback(async r=>{if(r.preventDefault(),!l||!C()||!s){n(a=>({...a,error:"You cannot submit scores for this game"}));return}if(!U()){n(a=>({...a,error:"It's not your turn to submit scores"}));return}if(f<0||j<0){n(a=>({...a,error:"Scores cannot be negative"}));return}if(Math.max(f,j)<s.settings.pointsToWin){n(a=>({...a,error:`At least one player must reach ${s.settings.pointsToWin} points to end the game`}));return}try{x(b=>({...b,isSubmitting:!0})),n(b=>({...b,error:null}));const a=await ye(l,f,j);a?(n(b=>({...b,game:a})),o&&o()):n(b=>({...b,error:"Failed to submit scores"}))}catch(a){console.error("Error submitting scores:",a),n(b=>({...b,error:a.message||"An error occurred while submitting scores"}))}finally{x(a=>({...a,isSubmitting:!1}))}},[l,C,s,U,f,j,o]),F=i.useCallback(async r=>{if(!l||!z()||!s){n(t=>({...t,error:"You cannot confirm this game"}));return}try{x(a=>({...a,isSubmitting:!0})),n(a=>({...a,error:null}));const t=await Ne(l,r);t?(n(a=>({...a,game:t})),o&&o()):n(a=>({...a,error:r?"Failed to confirm game":"Failed to dispute game"}))}catch(t){console.error("Error confirming game:",t),n(a=>({...a,error:t.message||"An error occurred while confirming the game"}))}finally{x(t=>({...t,isSubmitting:!1}))}},[l,z,s,o]),g=i.useMemo(()=>s?{isParticipant:C(),isCreator:P(),isOpponent:W(),canSubmitScores:U(),isPendingInvitation:v(),isSentInvitation:B(),isAccepted:I(),isCurrentUserTurn:L(),needsConfirmation:z()}:null,[s,C,P,W,U,v,B,I,L,z]),O=i.useMemo(()=>{if(!s)return{isValid:!1,canSubmit:!1};const r=Math.max(f,j),t=f>=0&&j>=0,a=t&&r>=s.settings.pointsToWin;return{isValid:t,canSubmit:a,maxScore:r}},[s,f,j]),V=i.useCallback(r=>{$(r)},[$]),le=i.useMemo(()=>e.jsxs("div",{className:"p-4 sm:p-6 max-w-sm sm:max-w-6xl mx-auto text-zinc-900 dark:text-white",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-6",children:"Game Details"}),e.jsx(A,{children:e.jsx(M,{className:"flex justify-center p-6",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})})]}),[]),ie=i.useMemo(()=>e.jsxs("div",{className:"p-4 sm:p-6 max-w-sm sm:max-w-6xl mx-auto text-zinc-900 dark:text-white",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-6",children:"Game Details"}),e.jsx(A,{children:e.jsxs(M,{className:"p-6",children:[e.jsx("div",{className:"p-4 bg-red-100 border border-red-400 text-red-700 rounded mb-4",children:R||"Game not found"}),e.jsx(T,{to:"/games",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-md",children:"Back to Games"})]})})]}),[R]);return se?le:R||!s?ie:e.jsxs("div",{className:"p-4 sm:p-6 max-w-sm sm:max-w-6xl mx-auto text-zinc-900 dark:text-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Game Details"}),e.jsx(T,{to:"/games",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm sm:text-base",children:"Back to Games"})]}),e.jsx(A,{children:e.jsxs(M,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsxs("span",{className:`inline-block px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium 
            ${s.status==="invited"?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-100":""}
            ${s.status==="accepted"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100":""}
            ${s.status==="rejected"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100":""}
            ${s.status==="in_progress"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100":""}
            ${s.status==="waiting_confirmation"?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100":""}
            ${s.status==="completed"?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100":""}
          `,children:[s.status==="invited"&&"Invitation Pending",s.status==="accepted"&&"Ready to Play",s.status==="rejected"&&"Invitation Rejected",s.status==="in_progress"&&"In Progress",s.status==="waiting_confirmation"&&"Waiting for Confirmation",s.status==="completed"&&"Completed"]}),s.status==="in_progress"&&s.activePlayer&&e.jsxs("span",{className:"ml-2 sm:ml-3 text-xs sm:text-sm block sm:inline mt-2 sm:mt-0",children:["Current Turn: ",s.activePlayer===s.createdBy?c?.displayName||"Creator":m?.displayName||"Opponent"]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsx(Y,{gameMode:s.settings.gameMode}),e.jsx(q,{points:s.settings.pointsToWin}),e.jsx(H,{useBoricuaRules:s.settings.useBoricuaRules||!1}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-zinc-700 rounded-md",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Created"}),e.jsx("p",{className:"font-medium",children:s.createdAt?new Date(s.createdAt.toDate()).toLocaleString():"Unknown"})]}),N&&e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{src:N.photoURL||void 0,initials:N.name.substring(0,2).toUpperCase(),alt:`${N.name} league`,className:"h-12 w-12 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"League Game"}),e.jsx("p",{className:"font-medium text-blue-800 dark:text-blue-200 truncate",children:N.name}),e.jsx(T,{to:`/leagues/${N.id}`,className:"text-xs text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"View League Details â†’"})]})]})})]}),e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold mb-3",children:"Participants"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1 p-3 border border-gray-200 dark:border-zinc-700 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors cursor-pointer",onClick:()=>c&&V(c),children:e.jsxs("div",{className:"flex items-center",children:[c?.photoURL?e.jsx("img",{src:c.photoURL,alt:c.displayName,className:"w-12 h-12 rounded-full mr-3"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center mr-3",children:c?.displayName.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:c?.displayName||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Creator"}),c?.stats&&e.jsxs("div",{className:"flex space-x-4 mt-1",children:[e.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400",children:[c.stats.gamesWon," wins"]}),e.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:[c.stats.gamesPlayed," games"]})]})]})]})}),e.jsx("div",{className:"flex-1 p-3 border border-gray-200 dark:border-zinc-700 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors cursor-pointer",onClick:()=>m&&V(m),children:e.jsxs("div",{className:"flex items-center",children:[m?.photoURL?e.jsx("img",{src:m.photoURL,alt:m.displayName,className:"w-12 h-12 rounded-full mr-3"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center mr-3",children:m?.displayName.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:m?.displayName||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Opponent"}),m?.stats&&e.jsxs("div",{className:"flex space-x-4 mt-1",children:[e.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400",children:[m.stats.gamesWon," wins"]}),e.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:[m.stats.gamesPlayed," games"]})]})]})]})})]})]}),g?.isPendingInvitation&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Game Invitation"}),e.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-900 rounded-md mb-4",children:[e.jsxs("p",{className:"mb-3",children:[c?.displayName||"A player"," has invited you to play a game of dominoes."]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rejection Reason (optional)"}),e.jsx("input",{type:"text",value:D,onChange:r=>X(t=>({...t,rejectionReason:r.target.value})),placeholder:"Reason for declining (optional)",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-zinc-700 dark:border-zinc-600"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsx("button",{onClick:re,disabled:d,className:`py-2 rounded-md font-medium ${d?"bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-zinc-700 dark:text-zinc-400":"bg-red-600 text-white hover:bg-red-700"}`,children:d?"Processing...":"Decline Invitation"}),e.jsx("button",{onClick:te,disabled:d,className:`py-2 rounded-md font-medium ${d?"bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-zinc-700 dark:text-zinc-400":"bg-green-600 text-white hover:bg-green-700"}`,children:d?"Processing...":"Accept Invitation"})]})]})]}),g?.isSentInvitation&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Invitation Sent"}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900 rounded-md mb-4",children:e.jsxs("p",{children:["Your invitation has been sent to ",m?.displayName||"the opponent",". You'll be notified when they accept or decline."]})})]}),g?.isAccepted&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Ready to Play"}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-900 rounded-md mb-4",children:[e.jsx("p",{className:"mb-3",children:"Both players have accepted! You're ready to start the game."}),e.jsx("button",{onClick:ae,disabled:d,className:`w-full py-2 rounded-md font-medium ${d?"bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-zinc-700 dark:text-zinc-400":"bg-blue-600 text-white hover:bg-blue-700"}`,children:d?"Starting Game...":"Start Game"})]})]}),s.status==="rejected"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Invitation Declined"}),e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900 rounded-md mb-4",children:[e.jsx("p",{children:"This game invitation was declined."}),s.rejectionReason&&e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Reason:"})," ",s.rejectionReason]})]})]}),s.status==="in_progress"&&g?.isParticipant&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Submit Final Scores"}),g?.canSubmitScores?e.jsxs("form",{onSubmit:ne,children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900 rounded-md mb-4",children:[e.jsx("p",{children:"You are submitting the final scores for this game. The other player will need to confirm these scores."}),e.jsxs("p",{className:"mt-2 text-sm",children:["Enter scores for both players. At least one player must reach ",s.settings.pointsToWin," points."]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:c?.displayName||"Creator"}),e.jsx("input",{type:"number",min:"0",max:"999",value:f,onChange:r=>x(t=>({...t,creatorScore:parseInt(r.target.value)||0})),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-zinc-700 dark:border-zinc-600",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:m?.displayName||"Opponent"}),e.jsx("input",{type:"number",min:"0",max:"999",value:j,onChange:r=>x(t=>({...t,opponentScore:parseInt(r.target.value)||0})),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-zinc-700 dark:border-zinc-600",required:!0})]})]}),e.jsx("button",{type:"submit",disabled:d||!O.canSubmit,className:`w-full py-2 rounded-md font-medium ${d||!O.canSubmit?"bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-zinc-700 dark:text-zinc-400":"bg-blue-600 text-white hover:bg-blue-700"}`,children:d?"Submitting...":"Submit Final Scores"})]}):e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-md mb-4",children:[e.jsx("p",{children:"It's not your turn to submit scores. Wait for the active player to finish their turn."}),e.jsxs("p",{className:"mt-2 text-sm",children:["Active player: ",e.jsx("span",{className:"font-medium",children:s.activePlayer===s.createdBy?c?.displayName:m?.displayName})]})]})]}),g?.needsConfirmation&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Confirm Results"}),e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-md mb-4",children:[e.jsx("p",{className:"mb-3",children:"The other player has submitted the following scores:"}),e.jsxs("div",{className:"flex justify-center items-center text-center mb-4",children:[e.jsxs("div",{className:"text-center px-6",children:[e.jsx("p",{className:"text-sm",children:c?.displayName||"Creator"}),e.jsx("p",{className:"text-2xl font-bold",children:s.scores?.creator})]}),e.jsx("div",{className:"text-xl font-bold mx-4",children:"-"}),e.jsxs("div",{className:"text-center px-6",children:[e.jsx("p",{className:"text-sm",children:m?.displayName||"Opponent"}),e.jsx("p",{className:"text-2xl font-bold",children:s.scores?.opponent})]})]}),e.jsx("p",{className:"mb-3",children:"Are these scores correct?"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsx("button",{onClick:()=>F(!0),disabled:d,className:`py-2 rounded-md font-medium ${d?"bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-zinc-700 dark:text-zinc-400":"bg-green-600 text-white hover:bg-green-700"}`,children:d?"Processing...":"Confirm"}),e.jsx("button",{onClick:()=>F(!1),disabled:d,className:`py-2 rounded-md font-medium ${d?"bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-zinc-700 dark:text-zinc-400":"bg-red-600 text-white hover:bg-red-700"}`,children:d?"Processing...":"Dispute"})]})]})]}),s.status==="completed"&&s.scores&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Final Results"}),e.jsxs("div",{className:"p-4 rounded-md bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900",children:[e.jsxs("div",{className:"flex justify-center items-center text-center mb-4",children:[e.jsxs("div",{className:"text-center px-6",children:[e.jsx("p",{className:"text-sm",children:c?.displayName||"Creator"}),e.jsx("p",{className:"text-3xl font-bold",children:s.scores.creator})]}),e.jsx("div",{className:"text-xl font-bold mx-4",children:"-"}),e.jsxs("div",{className:"text-center px-6",children:[e.jsx("p",{className:"text-sm",children:m?.displayName||"Opponent"}),e.jsx("p",{className:"text-3xl font-bold",children:s.scores.opponent})]})]}),e.jsx("p",{className:"text-center font-medium",children:"Game completed"})]})]}),s.status==="waiting_confirmation"&&!g?.needsConfirmation&&e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900 rounded-md mb-4",children:e.jsxs("p",{className:"text-center",children:["Waiting for ",g?.needsConfirmation?"you":"the other player"," to confirm the results."]})}),s.status==="in_progress"&&s.activePlayer&&e.jsxs("div",{className:`p-4 mb-4 rounded-md ${g?.isCurrentUserTurn?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-900":"bg-gray-50 dark:bg-gray-900/20 border border-gray-200 dark:border-gray-900"}`,children:[e.jsx("p",{className:"text-center font-medium",children:g?.isCurrentUserTurn?"It's your turn to play and submit the final scores":`Waiting for ${s.activePlayer===s.createdBy?c?.displayName:m?.displayName} to play and submit the final scores`}),g?.isCurrentUserTurn&&e.jsx("p",{className:"text-center text-sm mt-2 text-green-600 dark:text-green-400",children:"Play your game in person, then submit the final scores when finished"})]})]})}),e.jsx(ke,{user:h,isOpen:Z,onClose:ee,customStats:h?{gamesPlayed:h.stats.gamesPlayed,gamesWon:h.stats.gamesWon,totalPoints:h.stats.totalPoints,rank:h.stats.globalRank,winRate:h.stats.gamesPlayed>0?h.stats.gamesWon/h.stats.gamesPlayed*100:0}:void 0})]})},Ie=i.memo(Pe);export{Ie as default};
