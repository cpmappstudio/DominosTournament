import{a1 as ts,v as as,a2 as ee,a6 as rs,m as w,i as Pe,j as e,X as se,Y as te,Z as ae,V as re,N as ne,O as ns,P as le,R as ie,C as L,a as D,b as A,d as F,a7 as ls,a8 as is,a9 as os,aa as E,ab as B,n as oe,p as ce,q as v,r as de,W as C,s as me,t as M,U as cs}from"./index-Co8lXdLa.js";import{r as n,g as ds,d as ms,L as I}from"./router-DHx2Xk7F.js";import{T as V,c as Ce,j as gs,h as Me,A as W,q as $,w as R,f as K,o as Re}from"./firebase-C4-V31L8.js";import{A as ge,I as xs}from"./input-BNWuluuh.js";import{F as us}from"./CalendarIcon-BrVDZ9nH.js";import{F as hs}from"./ChartBarIcon-BixXk3V1.js";import"./vendor-DJG_os-6.js";function ps({title:m,titleId:k,...U},b){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:b,"aria-labelledby":k},U),m?n.createElement("title",{id:k},m):null,n.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),n.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))}const fs=n.forwardRef(ps);function js({title:m,titleId:k,...U},b){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:b,"aria-labelledby":k},U),m?n.createElement("title",{id:k},m):null,n.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}const ys=n.forwardRef(js),Rs=()=>{const{id:m}=ds(),k=ms(),[U,b]=n.useState(!0),{config:_}=ts(),[xe,G]=n.useState(null),[a,Ue]=n.useState(null),[Le,ue]=n.useState(null),[f,De]=n.useState([]),[he,Ae]=n.useState([]),[N,pe]=n.useState([]),[Fe,Ie]=n.useState("overview"),[S,We]=n.useState({}),[j,Ge]=n.useState({}),[bs,Ns]=n.useState(!1),[P,q]=n.useState({}),{isOpen:Te,selectedUser:Ee,openModal:y,closeModal:Be}=as(),z=n.useCallback(s=>({uid:s.userId,displayName:s.displayName,username:s.displayName,email:"",photoURL:s.photoURL,createdAt:V.now(),stats:{gamesPlayed:s.gamesPlayed,gamesWon:s.gamesWon,totalPoints:s.pointsFor,globalRank:0,winStreak:0,maxWinStreak:0},hasSetUsername:!!s.displayName}),[]),[Ve,$e]=n.useState([]),[Ke,_e]=n.useState([]),[fe,je]=n.useState(""),[qe,ze]=n.useState([]),[Je,Oe]=n.useState([]),J=n.useCallback(async(s,t=!1)=>{if(s.length===0)return;const l=Ce();try{const r=s.map(async c=>{try{const u=await gs(Me(l,"users",c));if(u.exists()){const i=u.data(),Q={uid:c,displayName:i.displayName||i.username||c,username:i.username||c,email:i.email||"",photoURL:i.photoURL,createdAt:i.createdAt||V.now(),stats:i.stats||{gamesPlayed:0,gamesWon:0,totalPoints:0,globalRank:0,winStreak:0,maxWinStreak:0},hasSetUsername:!!i.displayName||!!i.username};return{userId:c,userData:i,isJudgeUser:ee(i.email||""),displayName:i.displayName||i.username||c,fullProfile:Q}}}catch(u){console.error(`Error fetching user data for ${c}:`,u)}return{userId:c,userData:null,isJudgeUser:!1,displayName:c,fullProfile:null}}),o=await Promise.all(r);We(c=>{const u={...c};return o.forEach(i=>{u[i.userId]=i.displayName}),u}),Ge(c=>{const u={...c};return o.forEach(i=>{u[i.userId]={displayName:i.displayName,photoURL:i.userData?.photoURL,email:i.userData?.email,isJudge:i.isJudgeUser}}),u}),q(c=>{const u={...c};return o.forEach(i=>{i.fullProfile&&(u[i.userId]=i.fullProfile)}),u})}catch(r){console.error("Error fetching user data:",r)}},[]),O=n.useCallback(async s=>J(s),[J]),ye=a?rs(w.currentUser,a.createdBy):!1,He=()=>{const s={};return f.forEach(r=>{s[r.userId]={gamesPlayed:0,gamesWon:0,points:0,pointsFor:0,pointsAgainst:0}}),N.filter(r=>r.status==="completed"&&r.scores).forEach(r=>{s[r.createdBy]||(s[r.createdBy]={gamesPlayed:0,gamesWon:0,points:0,pointsFor:0,pointsAgainst:0}),s[r.opponent]||(s[r.opponent]={gamesPlayed:0,gamesWon:0,points:0,pointsFor:0,pointsAgainst:0});const o=s[r.createdBy],c=s[r.opponent];o&&c&&r.scores&&(o.gamesPlayed++,c.gamesPlayed++,o.pointsFor+=r.scores.creator,o.pointsAgainst+=r.scores.opponent,c.pointsFor+=r.scores.opponent,c.pointsAgainst+=r.scores.creator,r.winner===r.createdBy?(o.gamesWon++,o.points+=a?.settings?.scoringSystem?.pointsPerWin||3,c.points+=a?.settings?.scoringSystem?.pointsPerLoss||0):r.winner===r.opponent?(c.gamesWon++,c.points+=a?.settings?.scoringSystem?.pointsPerWin||3,o.points+=a?.settings?.scoringSystem?.pointsPerLoss||0):(o.points+=a?.settings?.scoringSystem?.pointsPerDraw||1,c.points+=a?.settings?.scoringSystem?.pointsPerDraw||1))}),Object.entries(s).map(([r,o])=>({userId:r,displayName:S[r]||r,photoURL:j[r]?.photoURL,...o,winRate:o.gamesPlayed>0?o.gamesWon/o.gamesPlayed*100:0,pointDifferential:o.pointsFor-o.pointsAgainst})).sort((r,o)=>o.points!==r.points?o.points-r.points:o.winRate!==r.winRate?o.winRate-r.winRate:o.pointDifferential-r.pointDifferential)},be=n.useMemo(()=>He(),[f,N,S,j,a?.settings]);n.useEffect(()=>{const s=he.filter(t=>{const l=j[t.userId];return l&&!l.isJudge});De(s)},[he,j]);const Ne=f.some(s=>!j[s.userId]);n.useEffect(()=>{if(!m)return;b(!0),G(null);const s=Ce(),t=Me(s,"leagues",m),l=W(t,p=>{if(!p.exists()){G("League not found"),b(!1);return}const x={id:p.id,...p.data()};!x.isPublic&&w.currentUser&&(x.createdBy,w.currentUser.uid,ee(w.currentUser)),Ue(x),b(!1)},p=>{console.error("Error fetching league data:",p),G("Failed to load league data"),b(!1)});let r;if(w.currentUser){const p=$(K(s,"leagueMemberships"),R("leagueId","==",m),R("userId","==",w.currentUser.uid));r=W(p,x=>{if(x.empty){if(ue(null),a&&!a.isPublic&&w.currentUser){const g=a.createdBy===w.currentUser.uid,h=ee(w.currentUser);if(!g&&!h){G("Access denied. This is a private league and you are not a member."),b(!1);return}}}else{const g={id:x.docs[0].id,...x.docs[0].data()};ue(g)}})}const o=$(K(s,"leagueMemberships"),R("leagueId","==",m),R("status","==","active")),c=W(o,p=>{const x=[],g=[];p.forEach(h=>{const d={id:h.id,...h.data()};x.push(d),g.push(d.userId)}),Ae(x),g.length>0&&J(g)}),u=$(K(s,"leagueGames"),R("leagueId","==",m),Re("updatedAt","desc")),i=$(K(s,"games"),R("leagueId","==",m),Re("updatedAt","desc")),Q=W(u,p=>{const x=[],g=new Set;p.forEach(h=>{const d={id:h.id,...h.data()};x.push(d),d.createdBy&&g.add(d.createdBy),d.opponent&&g.add(d.opponent)}),pe(h=>[...h.filter(X=>!X.id.startsWith("league_")),...x]),g.size>0&&O(Array.from(g))}),ss=W(i,p=>{const x=[],g=new Set;p.forEach(h=>{const d=h.data(),Y={id:`regular_${h.id}`,leagueId:m,createdBy:d.createdBy,opponent:d.opponent,status:d.status,createdAt:d.createdAt,updatedAt:d.updatedAt,scores:d.scores,winner:d.winner};x.push(Y),d.createdBy&&g.add(d.createdBy),d.opponent&&g.add(d.opponent)}),pe(h=>[...h.filter(X=>X.id.startsWith("league_")),...x]),g.size>0&&O(Array.from(g))});return()=>{l(),r&&r(),c(),Q(),ss()}},[m,O]);const Ze=n.useCallback(s=>{let t=s.id;s.id.startsWith("regular_")&&(t=s.id.replace("regular_","")),k(`/game/${t}`)},[k]),Qe=n.useCallback(async s=>{try{if(P[s.userId]){y(P[s.userId]);return}const t=await Pe(s.userId);if(t)q(l=>({...l,[s.userId]:t})),y(t);else{const l=z(s);y(l)}}catch{const l=z(s);y(l)}},[y,z,P]),Ye=n.useCallback(async s=>{try{if(P[s.userId]){y(P[s.userId]);return}const t=await Pe(s.userId);if(t)q(l=>({...l,[s.userId]:t})),y(t);else{const l={uid:s.userId,displayName:s.displayName||s.userId,username:s.displayName||s.userId,email:"",photoURL:j[s.userId]?.photoURL,createdAt:s.joinedAt||V.now(),stats:{gamesPlayed:0,gamesWon:0,totalPoints:0,globalRank:0,winStreak:0,maxWinStreak:0},hasSetUsername:!!s.displayName};y(l)}}catch{const l={uid:s.userId,displayName:s.displayName||s.userId,username:s.displayName||s.userId,email:"",photoURL:j[s.userId]?.photoURL,createdAt:s.joinedAt||V.now(),stats:{gamesPlayed:0,gamesWon:0,totalPoints:0,globalRank:0,winStreak:0,maxWinStreak:0},hasSetUsername:!!s.displayName};y(l)}},[y,j,P]),we=n.useCallback(s=>{if(!_)return s;const t=_.gameModes.find(l=>l.value===s);return t?t.label:s},[_]),ve=n.useMemo(()=>[{accessorKey:"displayName",header:({column:s})=>e.jsxs(re,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"p-0 h-auto font-semibold hover:bg-transparent",children:["Member",e.jsx(ge,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>{const t=s.original,l=t.displayName||t.userId,r=j[t.userId];return e.jsxs("div",{className:"font-medium text-xs sm:text-sm flex items-center space-x-2",children:[e.jsxs(se,{className:"h-6 w-6 sm:h-8 sm:w-8",children:[e.jsx(te,{src:r?.photoURL||void 0,alt:l}),e.jsx(ae,{className:"text-xs",children:l.substring(0,2).toUpperCase()})]}),e.jsx("div",{className:"truncate max-w-20 sm:max-w-none",title:l,children:l})]})}},{accessorKey:"role",header:"Role",cell:({row:s})=>{const t=s.getValue("role");return e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t==="owner"?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-200":t==="admin"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:t})}},{accessorKey:"status",header:"Status",cell:({row:s})=>{const t=s.getValue("status");return e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t==="active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:t})}},{accessorKey:"joinedAt",header:"Joined",cell:({row:s})=>{const t=s.getValue("joinedAt");return e.jsx("div",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:t?new Date(t.toDate()).toLocaleDateString():"Unknown"})}}],[j]),ke=n.useMemo(()=>[{accessorKey:"rank",header:"Rank",cell:({row:s})=>{const t=s.index+1;return e.jsxs("div",{className:"text-xs sm:text-sm font-bold text-center",children:["#",t]})}},{accessorKey:"displayName",header:"Player",cell:({row:s})=>{const t=s.original;return e.jsxs("div",{className:"font-medium text-xs sm:text-sm flex items-center space-x-2",children:[e.jsxs(se,{className:"h-6 w-6 sm:h-8 sm:w-8",children:[e.jsx(te,{src:t.photoURL||void 0,alt:t.displayName}),e.jsx(ae,{className:"text-xs",children:t.displayName.substring(0,2).toUpperCase()})]}),e.jsx("div",{className:"truncate max-w-20 sm:max-w-none",title:t.displayName,children:t.displayName})]})}},{accessorKey:"gamesPlayed",header:"Games",cell:({row:s})=>e.jsx("div",{className:"text-xs sm:text-sm text-center",children:s.getValue("gamesPlayed")})},{accessorKey:"gamesWon",header:"Wins",cell:({row:s})=>e.jsx("div",{className:"text-xs sm:text-sm text-center",children:s.getValue("gamesWon")})},{accessorKey:"winRate",header:"Win %",cell:({row:s})=>{const t=s.getValue("winRate");return e.jsxs("div",{className:"text-xs sm:text-sm text-center font-medium",children:[t.toFixed(1),"%"]})}},{accessorKey:"points",header:"Points",cell:({row:s})=>e.jsx("div",{className:"text-xs sm:text-sm text-center font-mono",children:s.getValue("points")})}],[]),Se=n.useMemo(()=>[{accessorKey:"createdAt",header:({column:s})=>e.jsxs(re,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"p-0 h-auto font-semibold hover:bg-transparent",children:["Date",e.jsx(ge,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>{const t=s.getValue("createdAt");return e.jsx("div",{className:"text-xs sm:text-sm whitespace-nowrap",children:t?new Date(t.toDate()).toLocaleDateString():"Unknown"})}},{accessorKey:"players",header:"Players",cell:({row:s})=>{const t=s.original;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.creatorName}),e.jsx("span",{className:"text-gray-500",children:"vs"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.opponentName})]})}},{accessorKey:"status",header:({column:s})=>e.jsxs(re,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"p-0 h-auto font-semibold hover:bg-transparent",children:["Status",e.jsx(ge,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>{const t=s.getValue("status");return e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":t==="in_progress"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":t==="invited"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":t==="accepted"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":t==="waiting_confirmation"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:t==="waiting_confirmation"?"Awaiting Confirmation":t==="in_progress"?"In Progress":t==="accepted"?"Ready to Start":t==="invited"?"Invited":t==="completed"?"Completed":t})}},{accessorKey:"scores",header:"Score",cell:({row:s})=>{const t=s.original;return t.scores?e.jsxs("span",{className:"text-gray-900 dark:text-white",children:[t.scores.creator," - ",t.scores.opponent]}):e.jsx("span",{className:"text-gray-500",children:"-"})}}],[]),Xe=n.useMemo(()=>f.map(s=>({...s,displayName:S[s.userId]||s.userId})),[f,S,j]),es=n.useMemo(()=>N.filter(s=>s.status!=="rejected"&&(s.status==="completed"||s.status==="in_progress"||s.status==="accepted"||s.status==="waiting_confirmation"||s.status==="invited")).map(s=>({...s,creatorName:S[s.createdBy]||s.createdBy,opponentName:S[s.opponent]||s.opponent})),[N,S]),T=ne({data:Xe,columns:ve,onSortingChange:$e,onColumnFiltersChange:_e,onGlobalFilterChange:je,getCoreRowModel:ie(),getSortedRowModel:le(),getFilteredRowModel:ns(),globalFilterFn:"includesString",state:{sorting:Ve,columnFilters:Ke,globalFilter:fe}}),H=ne({data:be,columns:ke,onSortingChange:ze,getCoreRowModel:ie(),getSortedRowModel:le(),state:{sorting:qe}}),Z=ne({data:es,columns:Se,onSortingChange:Oe,getCoreRowModel:ie(),getSortedRowModel:le(),state:{sorting:Je}});return U?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):xe||!a?e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-4",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-red-700",children:xe||"League not found"})})})}),e.jsx(I,{to:"/leagues",className:"text-blue-600 hover:underline",children:"← Back to Leagues"})]}):e.jsxs("div",{className:"p-3 sm:p-6 w-full max-w-full sm:max-w-6xl mx-auto dark:text-white",children:[e.jsxs(L,{className:"mb-4 sm:mb-6",children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(se,{className:"h-12 w-12 sm:h-16 sm:w-16",children:[e.jsx(te,{src:a.photoURL||void 0,alt:a.name}),e.jsx(ae,{children:a.name.substring(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(A,{className:"text-xl sm:text-2xl truncate",children:a.name}),e.jsx("div",{className:"flex items-center space-x-2 sm:space-x-4 mt-2",children:e.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium ${a.status==="active"?"bg-green-500 text-white":a.status==="upcoming"?"bg-yellow-500 text-white":a.status==="completed"?"bg-gray-500 text-white":"bg-red-500 text-white"}`,children:a.status&&typeof a.status=="string"?a.status.charAt(0).toUpperCase()+a.status.slice(1):"Unknown"})})]})]})}),e.jsxs(F,{children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:a.description}),a.settings?.pricing?.paymentRequired&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("svg",{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsx("span",{className:"font-semibold text-green-700 dark:text-green-300",children:"Premium League"})]}),e.jsxs("div",{className:"text-sm text-green-600 dark:text-green-400",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{className:"text-2xl font-bold",children:new Intl.NumberFormat("en-US",{style:"currency",currency:a.settings.pricing.currency||"USD"}).format(a.settings.pricing.monthlyFee)}),e.jsx("span",{className:"text-sm ml-1",children:"/month"})]}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Monthly membership fee required to participate in this league. Payment is processed securely through Square."})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 dark:text-gray-400 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ls,{className:"h-5 w-5 mr-1"}),e.jsxs("span",{children:[f.length," members"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{className:"h-5 w-5 mr-1"}),e.jsxs("span",{children:["Created"," ",new Date(a.createdAt.toDate()).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(hs,{className:"h-5 w-5 mr-1"}),e.jsxs("span",{children:[we(a.settings?.gameMode||"single")," ","mode • ",a.settings?.pointsToWin||100," points"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(I,{to:"/leagues",className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-zinc-700 dark:text-gray-200 dark:hover:bg-zinc-600 text-center sm:text-left",children:"Back to Leagues"}),!Le&&a.status&&a.status!=="completed"&&a.settings?.allowJoinRequests!==!1&&e.jsx(I,{to:`/leagues/join/${m}`,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-center sm:text-left",children:"Join League"})]}),ye&&e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsxs(I,{to:`/leagues/manage/${m}`,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center justify-center sm:justify-start",children:[e.jsx(fs,{className:"h-5 w-5 mr-1"}),"Manage League"]})})]})]})]}),e.jsxs(is,{defaultValue:"overview",value:Fe,onValueChange:s=>Ie(s),children:[e.jsx("div",{className:"overflow-x-auto -mx-3 sm:mx-0",children:e.jsxs(os,{className:"grid w-max min-w-full sm:w-full grid-cols-4 mx-3 sm:mx-0",children:[e.jsx(E,{value:"overview",className:"text-xs sm:text-sm",children:"Overview"}),e.jsx(E,{value:"standings",className:"text-xs sm:text-sm",children:"Standings"}),e.jsxs(E,{value:"members",className:"text-xs sm:text-sm",children:["Members (",f.length,")"]}),e.jsxs(E,{value:"games",className:"text-xs sm:text-sm",children:["Games (",N.length,")"]})]})}),e.jsx(B,{value:"overview",className:"mt-4 sm:mt-6",children:e.jsxs(L,{children:[e.jsx(D,{children:e.jsx(A,{children:"League Overview"})}),e.jsxs(F,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Game Settings"}),e.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Game Mode:"})," ",we(a.settings?.gameMode||"single")]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Points to Win:"})," ",a.settings?.pointsToWin||150," points"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Maximum Players:"})," ",a.settings?.maxPlayers||16]}),(a.settings?.timeLimit||0)>0&&e.jsxs("li",{children:[e.jsx("strong",{children:"Time Limit:"})," ",a.settings.timeLimit," minutes per game"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Requires Confirmation:"})," ",a.settings?.requireConfirmation?"Yes":"No"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Penalties Enabled:"})," ",a.settings?.penaltiesEnabled?"Yes":"No"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tournament Format"}),e.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Format:"})," ",a.settings?.tournamentFormat==="round-robin"?"Round Robin":a.settings?.tournamentFormat==="elimination"?"Elimination":a.settings?.tournamentFormat==="swiss"?"Swiss System":a.settings?.tournamentFormat||"Custom"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Number of Rounds:"})," ",a.settings?.numberOfRounds||"Not set"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Playoffs:"})," ",a.settings?.playoffsEnabled?`Yes (Top ${a.settings?.playoffTeams||4} advance)`:"No"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Scoring System:"})," ",a.settings?.scoringSystem?.pointsPerWin||3," pts win / ",a.settings?.scoringSystem?.pointsPerDraw||1," pts draw / ",a.settings?.scoringSystem?.pointsPerLoss||0," ","pts loss"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Tiebreakers:"})," ",a.settings?.scoringSystem?.usePointDifferential?"Uses point differential":"Win count only"]})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"League Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-700 p-3 sm:p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Total Members"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:f.length})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-700 p-3 sm:p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Total Matches"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:N.length})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-700 p-3 sm:p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Completed Matches"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:N.filter(s=>s.status==="completed").length})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-700 p-3 sm:p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Active Matches"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:N.filter(s=>["in_progress","accepted","waiting_confirmation"].includes(s.status)).length})]})]})]})]})]})}),e.jsx(B,{value:"standings",className:"mt-4 sm:mt-6",children:e.jsxs(L,{children:[e.jsx(D,{children:e.jsxs(A,{className:"flex justify-between items-center",children:[e.jsx("span",{children:"League Standings"}),a.status&&a.status==="active"&&e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-normal",children:"Updated in real-time as games are played"})]})}),e.jsx(F,{children:be.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No games completed yet"}):e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(oe,{children:[e.jsx(ce,{children:H.getHeaderGroups().map(s=>e.jsx(v,{children:s.headers.map(t=>e.jsx(de,{children:t.isPlaceholder?null:C(t.column.columnDef.header,t.getContext())},t.id))},s.id))}),e.jsx(me,{children:H.getRowModel().rows?.length?H.getRowModel().rows.map((s,t)=>e.jsx(v,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50",onClick:()=>Qe(s.original),children:s.getVisibleCells().map(l=>e.jsx(M,{children:C(l.column.columnDef.cell,l.getContext())},l.id))},s.id)):e.jsx(v,{children:e.jsx(M,{colSpan:ke.length,className:"h-24 text-center",children:"No rankings found."})})})]})})})})]})}),e.jsx(B,{value:"members",className:"mt-4 sm:mt-6",children:e.jsxs(L,{children:[e.jsx(D,{children:e.jsxs(A,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsxs("span",{children:["League Members (",f.length,")"]}),ye&&e.jsxs(I,{to:`/leagues/manage/${m}`,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 flex items-center justify-center sm:justify-start w-full sm:w-auto",children:[e.jsx(ys,{className:"h-4 w-4 mr-1"}),"Manage Members"]})]})}),e.jsx(F,{children:f.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No members have joined this league yet"}):Ne?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mx-auto mb-2"}),"Loading member profiles..."]}):e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(xs,{placeholder:"Search members...",value:fe??"",onChange:s=>je(String(s.target.value)),className:"max-w-sm"}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[T.getRowModel().rows.length," of ",f.length," members",Ne&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-t border-b border-blue-500"}),e.jsx("span",{className:"text-xs",children:"Loading avatars..."})]})]})]}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(oe,{children:[e.jsx(ce,{children:T.getHeaderGroups().map(s=>e.jsx(v,{children:s.headers.map(t=>e.jsx(de,{children:t.isPlaceholder?null:C(t.column.columnDef.header,t.getContext())},t.id))},s.id))}),e.jsx(me,{children:T.getRowModel().rows?.length?T.getRowModel().rows.map(s=>e.jsx(v,{className:"hover:bg-gray-50 dark:hover:bg-zinc-700/50 cursor-pointer",onClick:()=>Ye(s.original),children:s.getVisibleCells().map(t=>e.jsx(M,{children:C(t.column.columnDef.cell,t.getContext())},t.id))},s.id)):e.jsx(v,{children:e.jsx(M,{colSpan:ve.length,className:"h-24 text-center",children:"No members found."})})})]})})]})})]})}),e.jsx(B,{value:"games",className:"mt-4 sm:mt-6",children:e.jsxs(L,{children:[e.jsx(D,{children:e.jsx(A,{children:"League Games"})}),e.jsx(F,{children:N.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No games have been played in this league yet"}):e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(oe,{children:[e.jsx(ce,{children:Z.getHeaderGroups().map(s=>e.jsx(v,{children:s.headers.map(t=>e.jsx(de,{children:t.isPlaceholder?null:C(t.column.columnDef.header,t.getContext())},t.id))},s.id))}),e.jsx(me,{children:Z.getRowModel().rows?.length?Z.getRowModel().rows.map(s=>e.jsx(v,{className:"hover:bg-gray-50 dark:hover:bg-zinc-700/50 cursor-pointer",onClick:()=>Ze(s.original),children:s.getVisibleCells().map(t=>e.jsx(M,{children:C(t.column.columnDef.cell,t.getContext())},t.id))},s.id)):e.jsx(v,{children:e.jsx(M,{colSpan:Se.length,className:"h-24 text-center",children:"No games found."})})})]})})})})]})})]}),e.jsx(cs,{isOpen:Te,onClose:Be,user:Ee})]})};export{Rs as default};
